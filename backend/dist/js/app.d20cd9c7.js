(function(){"use strict";var e={6305:function(e,t,s){var r=s(9746),o=s(5976),a=s(160),n=s.p+"img/logo.96ab8362.png";const i={id:"app",class:"d-flex flex-column min-vh-100 background-page"},l={class:"navbar navbar-expand-lg navbar-light background-nav"},c={class:"container-fluid"},d=(0,o.Lk)("img",{src:n,alt:"Gluten Hack Logo"},null,-1),u=(0,o.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,o.Lk)("span",{class:"navbar-toggler-icon"})],-1),m={class:"collapse navbar-collapse",id:"navbarNav"},p={class:"navbar-nav ms-auto mb-2 mb-lg-0"},h={key:0,class:"nav-item"},v={key:1,class:"nav-item"},g={key:2,class:"nav-item"},f={key:3,class:"nav-item"},b={key:4,class:"nav-item"},k={class:"nav-item"},w=(0,o.Lk)("option",{value:"en"},"English",-1),y=(0,o.Lk)("option",{value:"fr"},"Français",-1),L=[w,y],$={class:"container flex-grow-1 mt-4"};function x(e,t,s,n,w,y){const x=(0,o.g2)("router-link"),C=(0,o.g2)("router-view"),M=(0,o.g2)("FooterPage");return(0,o.uX)(),(0,o.CE)("div",i,[(0,o.Lk)("nav",l,[(0,o.Lk)("div",c,[(0,o.bF)(x,{class:"navbar-brand",to:"/"},{default:(0,o.k6)((()=>[d])),_:1}),u,(0,o.Lk)("div",m,[(0,o.Lk)("ul",p,[e.isAuthenticated?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("li",h,[(0,o.bF)(x,{to:"/register",class:"nav-link text-white"},{default:(0,o.k6)((()=>[(0,o.eW)((0,a.v_)(e.$t("createAccount")),1)])),_:1})])),e.isAuthenticated?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("li",v,[(0,o.bF)(x,{to:"/login",class:"nav-link text-white"},{default:(0,o.k6)((()=>[(0,o.eW)((0,a.v_)(e.$t("login")),1)])),_:1})])),e.isAuthenticated?((0,o.uX)(),(0,o.CE)("li",g,[(0,o.bF)(x,{to:"/scan",class:"nav-link text-white"},{default:(0,o.k6)((()=>[(0,o.eW)("Scan")])),_:1})])):(0,o.Q3)("",!0),e.isAuthenticated?((0,o.uX)(),(0,o.CE)("li",f,[(0,o.bF)(x,{to:"/map",class:"nav-link text-white"},{default:(0,o.k6)((()=>[(0,o.eW)("Carte")])),_:1})])):(0,o.Q3)("",!0),e.isAuthenticated?((0,o.uX)(),(0,o.CE)("li",b,[(0,o.bF)(x,{to:"/profile",class:"nav-link text-white"},{default:(0,o.k6)((()=>[(0,o.eW)("Profil")])),_:1})])):(0,o.Q3)("",!0),(0,o.Lk)("li",k,[(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.$i18n.locale=t),class:"form-select"},L,512),[[r.u1,e.$i18n.locale]])])])])])]),(0,o.Lk)("div",$,[(0,o.bF)(C)]),(0,o.bF)(M)])}var C=s(1449);const M={class:"footer mt-auto py-3 background-footer text-white"},E={class:"text-center mt-4"};function P(e,t,s,r,n,i){const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("footer",M,[(0,o.Lk)("div",E,[(0,o.Lk)("p",null,[(0,o.eW)("© 2024 Gluten Hack "),(0,o.bF)(l,{to:"/privacy-policy",class:"text-white"},{default:(0,o.k6)((()=>[(0,o.eW)((0,a.v_)(e.$t("policy")),1)])),_:1})])])])}var A={name:"FooterPage"},X=s(1169);const V=(0,X.A)(A,[["render",P]]);var _=V,j={name:"App",components:{FooterPage:_},computed:{...(0,C.aH)(["isAuthenticated"])}};const T=(0,X.A)(j,[["render",x]]);var z=T,S=s(9053),q=s.p+"img/icone.ecbb402f.gif";const Q={class:"container mt-5"},F={class:"row"},O={class:"col-12 col-md-8 offset-md-2 text-center"},R={class:"display-4 text-white"},G=(0,o.Lk)("img",{src:q,alt:"Gluten Hack Logo",height:"400",class:"mb-3"},null,-1);function N(e,t,s,r,n,i){return(0,o.uX)(),(0,o.CE)("div",Q,[(0,o.Lk)("div",F,[(0,o.Lk)("div",O,[(0,o.Lk)("h1",R,(0,a.v_)(e.$t("welcome")),1),G])])])}s(4114);var U={name:"HomePage",methods:{navigateToRegister(){this.$router.push("/register")}}};const B=(0,X.A)(U,[["render",N]]);var J=B;const H={class:"d-flex justify-content-center align-items-center vh-100 bg-fond text-white rounded mb-4"},W={class:"card p-4 bg-form rounded",style:{width:"400px"}},D=(0,o.Lk)("div",{class:"text-center mb-3"},[(0,o.Lk)("h3",{class:"text-white"},"Créer un compte")],-1),I={class:"mb-3"},Y=(0,o.Lk)("label",{for:"name",class:"form-label text-white"},"Nom",-1),K={key:0,class:"invalid-feedback"},Z={class:"mb-3"},ee=(0,o.Lk)("label",{for:"email",class:"form-label text-white"},"Email",-1),te={key:0,class:"invalid-feedback"},se={class:"mb-3"},re=(0,o.Lk)("label",{for:"password",class:"form-label text-white"},"Mot de passe",-1),oe={key:0,class:"invalid-feedback"},ae={class:"mb-3"},ne=(0,o.Lk)("label",{for:"confirmPassword",class:"form-label text-white"},"Confirmez le mot de passe",-1),ie={key:0,class:"invalid-feedback"},le={key:0,class:"alert alert-danger",role:"alert"},ce={key:1,class:"alert alert-success",role:"alert"},de={class:"d-grid gap-2 mt-3"},ue=["disabled"],me={class:"text-center mt-3"},pe={class:"text-white"};function he(e,t,s,n,i,l){const c=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",H,[(0,o.Lk)("div",W,[D,(0,o.Lk)("form",{onSubmit:t[8]||(t[8]=(0,r.D$)(((...e)=>l.register&&l.register(...e)),["prevent"]))},[(0,o.Lk)("div",I,[Y,(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.name=e),class:(0,a.C4)(["form-control",{"is-invalid":n.v$.name.$error}]),id:"name",placeholder:"Votre nom",onBlur:t[1]||(t[1]=e=>n.v$.name.$touch())},null,34),[[r.Jo,i.name]]),n.v$.name.$error?((0,o.uX)(),(0,o.CE)("div",K,"Le nom est requis.")):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Z,[ee,(0,o.bo)((0,o.Lk)("input",{type:"email","onUpdate:modelValue":t[2]||(t[2]=e=>i.email=e),class:(0,a.C4)(["form-control",{"is-invalid":n.v$.email.$error}]),id:"email",placeholder:"exemple@gmail.com",onBlur:t[3]||(t[3]=e=>n.v$.email.$touch())},null,34),[[r.Jo,i.email]]),n.v$.email.$error?((0,o.uX)(),(0,o.CE)("div",te," L'email doit être valide. ")):(0,o.Q3)("",!0)]),(0,o.Lk)("div",se,[re,(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":t[4]||(t[4]=e=>i.password=e),class:(0,a.C4)(["form-control",{"is-invalid":n.v$.password.$error}]),id:"password",placeholder:"Veuillez saisir votre mot de passe",onBlur:t[5]||(t[5]=e=>n.v$.password.$touch())},null,34),[[r.Jo,i.password]]),n.v$.password.$error?((0,o.uX)(),(0,o.CE)("div",oe,"Le mot de passe doit contenir au moins 8 caractères.")):(0,o.Q3)("",!0)]),(0,o.Lk)("div",ae,[ne,(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":t[6]||(t[6]=e=>i.confirmPassword=e),class:(0,a.C4)(["form-control",{"is-invalid":n.v$.confirmPassword.$error}]),id:"confirmPassword",placeholder:"Veuillez saisir à nouveau votre mot de passe",onBlur:t[7]||(t[7]=e=>n.v$.confirmPassword.$touch())},null,34),[[r.Jo,i.confirmPassword]]),n.v$.confirmPassword.$error?((0,o.uX)(),(0,o.CE)("div",ie,"Les mots de passe ne correspondent pas.")):(0,o.Q3)("",!0)]),i.errorMessage?((0,o.uX)(),(0,o.CE)("div",le,(0,a.v_)(i.errorMessage),1)):(0,o.Q3)("",!0),i.successMessage?((0,o.uX)(),(0,o.CE)("div",ce,(0,a.v_)(i.successMessage),1)):(0,o.Q3)("",!0),(0,o.Lk)("div",de,[(0,o.Lk)("button",{type:"submit",class:"btn btn-login rounded text-white",disabled:n.v$.$invalid},"S'inscrire",8,ue)])],32),(0,o.Lk)("div",me,[(0,o.Lk)("span",pe,[(0,o.eW)("Vous avez déjà un compte ? "),(0,o.bF)(c,{to:"/login",class:"text-white"},{default:(0,o.k6)((()=>[(0,o.eW)("Se connecter")])),_:1})])])])])}var ve=s(5538),ge=s(5378),fe={name:"UserRegister",data(){return{name:"",email:"",password:"",confirmPassword:"",errorMessage:"",successMessage:""}},validations(){return{name:{required:ge.mw},email:{required:ge.mw,email:ge.Rp},password:{required:ge.mw,minLength:(0,ge.Bp)(8)},confirmPassword:{required:ge.mw,sameAsPassword:(0,ge.f4)(this.password)}}},setup(){const e=(0,ve.Ay)();return{v$:e}},methods:{async register(){if(this.errorMessage="",this.successMessage="",this.v$.$touch(),!this.v$.$invalid)try{const e=await fetch("http://localhost:3000/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:this.name,email:this.email,password:this.password})}),t=await e.json();e.ok?(this.successMessage="Inscription réussie ! Redirection vers la page de connexion...",setTimeout((()=>{this.$router.push("/login")}),1500)):this.errorMessage=t.message||"L'inscription a échoué. Veuillez vérifier vos informations et réessayer."}catch(e){this.errorMessage="Erreur lors de la communication avec le serveur. Veuillez réessayer plus tard."}}}};const be=(0,X.A)(fe,[["render",he]]);var ke=be;const we={class:"d-flex justify-content-center align-items-center vh-100 bg-fond text-white rounded mb-4"},ye={class:"card p-4 bg-form rounded",style:{width:"400px"}},Le={class:"text-center mb-3"},$e={class:"text-white"},xe={class:"mb-3"},Ce=(0,o.Lk)("label",{for:"email",class:"form-label text-white"},"Email",-1),Me={key:0,class:"invalid-feedback"},Ee={class:"mb-3"},Pe={for:"password",class:"form-label text-white"},Ae={key:0,class:"invalid-feedback"},Xe={key:0,class:"alert alert-danger",role:"alert"},Ve=(0,o.Lk)("div",{class:"d-flex justify-content-between"},[(0,o.Lk)("a",{href:"/reset-password",class:"text-white"},"Vous avez oublié votre mot de passe ?")],-1),_e={class:"d-grid gap-2 mt-3"},je=["disabled"],Te=(0,o.Lk)("div",{class:"text-center mt-3"},[(0,o.Lk)("span",{class:"text-white"},[(0,o.eW)("Vous êtes nouveau ? "),(0,o.Lk)("a",{href:"/register",class:"text-white"},"Créer un compte")])],-1);function ze(e,t,s,n,i,l){return(0,o.uX)(),(0,o.CE)("div",we,[(0,o.Lk)("div",ye,[(0,o.Lk)("div",Le,[(0,o.Lk)("h3",$e,(0,a.v_)(e.$t("welcomeForm")),1)]),(0,o.Lk)("form",{onSubmit:t[4]||(t[4]=(0,r.D$)(((...e)=>l.login&&l.login(...e)),["prevent"]))},[(0,o.Lk)("div",xe,[Ce,(0,o.bo)((0,o.Lk)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>i.email=e),class:(0,a.C4)(["form-control",{"is-invalid":l.$v.email.$error}]),id:"email",placeholder:"exemple@gmail.com",onBlur:t[1]||(t[1]=e=>l.$v.email.$touch())},null,34),[[r.Jo,i.email]]),l.$v.email.$error?((0,o.uX)(),(0,o.CE)("div",Me,"L'email doit être valide.")):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Ee,[(0,o.Lk)("label",Pe,(0,a.v_)(e.$t("password")),1),(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=e=>i.password=e),class:(0,a.C4)(["form-control",{"is-invalid":l.$v.password.$error}]),id:"password",placeholder:"Veuillez saisir votre mot de passe",onBlur:t[3]||(t[3]=e=>l.$v.password.$touch())},null,34),[[r.Jo,i.password]]),l.$v.password.$error?((0,o.uX)(),(0,o.CE)("div",Ae,"Le mot de passe est requis.")):(0,o.Q3)("",!0)]),i.errorMessage?((0,o.uX)(),(0,o.CE)("div",Xe,(0,a.v_)(i.errorMessage),1)):(0,o.Q3)("",!0),Ve,(0,o.Lk)("div",_e,[(0,o.Lk)("button",{type:"submit",class:"btn btn-login rounded text-white",disabled:l.$v.$invalid},"S'identifier",8,je)])],32),Te])])}var Se={name:"UserLogin",data(){return{email:"",password:"",errorMessage:""}},validations(){return{email:{required:ge.mw,email:ge.Rp},password:{required:ge.mw}}},setup(){const e=(0,ve.Ay)();return{v$:e}},computed:{$v(){return this.v$}},methods:{async login(){if(this.errorMessage="",this.$v.$touch(),!this.$v.$invalid)try{const e=await fetch("http://localhost:3000/users/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:this.email,password:this.password})}),t=await e.json();e.ok?(this.$store.dispatch("login"),this.$router.push("/profile")):this.errorMessage=t.message||"Échec de la connexion. Veuillez vérifier votre email et votre mot de passe."}catch(e){this.errorMessage="Erreur lors de la communication avec le serveur. Veuillez réessayer plus tard."}}}};const qe=(0,X.A)(Se,[["render",ze]]);var Qe=qe,Fe=s.p+"img/icone.b3133ee3.png";const Oe={class:"d-flex justify-content-center align-items-center min-vh-50 bg-fond text-white rounded mb-4"},Re={class:"card p-4 bg-form rounded",style:{width:"400px"}},Ge={class:"text-center mb-3"},Ne=(0,o.Lk)("img",{src:Fe,alt:"Gluten Hack Logo",height:"80",class:"mb-3"},null,-1),Ue={class:"text-white"},Be={class:"text-center"},Je={class:"text-center"},He={key:0,class:"alert alert-danger mt-3"};function We(e,t,s,r,n,i){return(0,o.uX)(),(0,o.CE)("div",Oe,[(0,o.Lk)("div",Re,[(0,o.Lk)("div",Ge,[Ne,(0,o.Lk)("h3",Ue,"Bienvenue "+(0,a.v_)(n.name)+" !",1)]),(0,o.Lk)("div",Be,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.logout&&i.logout(...e)),class:"btn btn-color rounded text-white mb-3"},"Se déconnecter")]),(0,o.Lk)("div",Je,[(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.deleteAccount&&i.deleteAccount(...e)),class:"btn btn-color rounded text-white"},"Supprimer le compte")]),n.errorMessage?((0,o.uX)(),(0,o.CE)("div",He,(0,a.v_)(n.errorMessage),1)):(0,o.Q3)("",!0)])])}var De={name:"UserProfile",data(){return{name:"",email:"",errorMessage:""}},methods:{async fetchProfile(){try{const e=await fetch("http://localhost:3000/users/profile",{credentials:"include"}),t=await e.json();e.ok?(this.name=t.name,this.email=t.email):(this.errorMessage=t.message||"Erreur lors de la récupération des informations du profil.",this.$router.push("/login"))}catch(e){this.errorMessage="Erreur lors de la communication avec le serveur. Veuillez réessayer plus tard."}},async logout(){try{const e=await fetch("http://localhost:3000/users/logout",{method:"POST",credentials:"include"});e.ok?(this.$store.dispatch("logout"),this.$router.push("/login")):this.errorMessage="Erreur lors de la déconnexion."}catch(e){this.errorMessage="Erreur lors de la déconnexion."}},async deleteAccount(){if(confirm("Êtes-vous sûr de vouloir supprimer votre compte ? Cette action est irréversible."))try{const e=await fetch("http://localhost:3000/users/delete",{method:"DELETE",credentials:"include"});e.ok?(alert("Votre compte a été supprimé avec succès."),this.logout()):this.errorMessage="Erreur lors de la suppression du compte."}catch(e){this.errorMessage="Erreur lors de la suppression du compte."}}},created(){this.fetchProfile()}};const Ie=(0,X.A)(De,[["render",We]]);var Ye=Ie;const Ke={class:"d-flex justify-content-center align-items-center vh-100 bg-fond text-white rounded mb-4"},Ze={class:"card p-4 bg-form rounded",style:{width:"400px"}},et=(0,o.Lk)("div",{class:"text-center mb-3"},[(0,o.Lk)("h3",{class:"text-white"},"Réinitialiser le mot de passe")],-1),tt={class:"mb-3"},st=(0,o.Lk)("label",{for:"email",class:"form-label text-white"},"Email",-1),rt={key:0,class:"invalid-feedback"},ot={key:0,class:"alert alert-danger",role:"alert"},at={key:1,class:"alert alert-success",role:"alert"},nt={class:"d-grid gap-2 mt-3"},it=["disabled"];function lt(e,t,s,n,i,l){return(0,o.uX)(),(0,o.CE)("div",Ke,[(0,o.Lk)("div",Ze,[et,(0,o.Lk)("form",{onSubmit:t[2]||(t[2]=(0,r.D$)(((...e)=>l.sendResetLink&&l.sendResetLink(...e)),["prevent"]))},[(0,o.Lk)("div",tt,[st,(0,o.bo)((0,o.Lk)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>i.email=e),class:(0,a.C4)(["form-control",{"is-invalid":n.v$.email.$error}]),id:"email",placeholder:"exemple@domaine.com",onBlur:t[1]||(t[1]=e=>n.v$.email.$touch())},null,34),[[r.Jo,i.email]]),n.v$.email.$error?((0,o.uX)(),(0,o.CE)("div",rt,"L'email doit être valide.")):(0,o.Q3)("",!0)]),i.errorMessage?((0,o.uX)(),(0,o.CE)("div",ot,(0,a.v_)(i.errorMessage),1)):(0,o.Q3)("",!0),i.successMessage?((0,o.uX)(),(0,o.CE)("div",at,(0,a.v_)(i.successMessage),1)):(0,o.Q3)("",!0),(0,o.Lk)("div",nt,[(0,o.Lk)("button",{type:"submit",class:"btn btn-login rounded text-white",disabled:n.v$.$invalid},"Réinitialiser le mot de passe",8,it)])],32)])])}var ct={name:"ResetPassword",data(){return{email:"",errorMessage:"",successMessage:""}},validations(){return{email:{required:ge.mw,email:ge.Rp}}},setup(){const e=(0,ve.Ay)();return{v$:e}},methods:{async sendResetLink(){if(this.errorMessage="",this.successMessage="",this.v$.$touch(),!this.v$.$invalid)try{const e=await fetch("http://localhost:3000/users/send-reset-link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.email}),credentials:"include"}),t=await e.json();t.success?this.successMessage="Un email de réinitialisation de mot de passe a été envoyé.":this.errorMessage=t.message||"Erreur lors de l'envoi de l'email de réinitialisation."}catch(e){this.errorMessage="Erreur lors de la communication avec le serveur. Veuillez réessayer plus tard."}}}};const dt=(0,X.A)(ct,[["render",lt]]);var ut=dt;const mt={class:"d-flex justify-content-center align-items-center vh-100 bg-fond text-white rounded mb-4"},pt={class:"card p-4 bg-form rounded",style:{width:"400px"}},ht=(0,o.Lk)("div",{class:"text-center mb-3"},[(0,o.Lk)("h3",{class:"text-white"},"Réinitialiser le mot de passe")],-1),vt={class:"mb-3"},gt=(0,o.Lk)("label",{for:"password",class:"form-label text-white"},"Nouveau mot de passe",-1),ft={key:0,class:"invalid-feedback"},bt={class:"mb-3"},kt=(0,o.Lk)("label",{for:"confirmPassword",class:"form-label text-white"},"Confirmez le mot de passe",-1),wt={key:0,class:"invalid-feedback"},yt={key:0,class:"alert alert-danger",role:"alert"},Lt={key:1,class:"alert alert-success",role:"alert"},$t={class:"d-grid gap-2 mt-3"},xt=["disabled"];function Ct(e,t,s,n,i,l){return(0,o.uX)(),(0,o.CE)("div",mt,[(0,o.Lk)("div",pt,[ht,(0,o.Lk)("form",{onSubmit:t[4]||(t[4]=(0,r.D$)(((...e)=>l.resetPassword&&l.resetPassword(...e)),["prevent"]))},[(0,o.Lk)("div",vt,[gt,(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":t[0]||(t[0]=e=>i.password=e),class:(0,a.C4)(["form-control",{"is-invalid":n.v$.password.$error}]),id:"password",placeholder:"Veuillez saisir votre nouveau mot de passe",onBlur:t[1]||(t[1]=e=>n.v$.password.$touch())},null,34),[[r.Jo,i.password]]),n.v$.password.$error?((0,o.uX)(),(0,o.CE)("div",ft," Le mot de passe doit comporter au minimum 8 caractères. ")):(0,o.Q3)("",!0)]),(0,o.Lk)("div",bt,[kt,(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=e=>i.confirmPassword=e),class:(0,a.C4)(["form-control",{"is-invalid":n.v$.confirmPassword.$error}]),id:"confirmPassword",placeholder:"Veuillez saisir à nouveau votre mot de passe",onBlur:t[3]||(t[3]=e=>n.v$.confirmPassword.$touch())},null,34),[[r.Jo,i.confirmPassword]]),n.v$.confirmPassword.$error?((0,o.uX)(),(0,o.CE)("div",wt," Les mots de passe ne correspondent pas. ")):(0,o.Q3)("",!0)]),i.errorMessage?((0,o.uX)(),(0,o.CE)("div",yt,(0,a.v_)(i.errorMessage),1)):(0,o.Q3)("",!0),i.successMessage?((0,o.uX)(),(0,o.CE)("div",Lt,(0,a.v_)(i.successMessage),1)):(0,o.Q3)("",!0),(0,o.Lk)("div",$t,[(0,o.Lk)("button",{type:"submit",class:"btn btn-login rounded text-white",disabled:n.v$.$invalid},"Réinitialiser le mot de passe",8,xt)])],32)])])}var Mt={name:"ResetPasswordForm",data(){return{password:"",confirmPassword:"",errorMessage:"",successMessage:"",token:this.$route.query.token}},validations(){return{password:{required:ge.mw,minLength:(0,ge.Bp)(8)},confirmPassword:{required:ge.mw,sameAsPassword:(0,ge.f4)(this.password)}}},setup(){const e=(0,ve.Ay)();return{v$:e}},methods:{async resetPassword(){if(this.errorMessage="",this.successMessage="",this.v$.$touch(),!this.v$.$invalid)try{const e=await fetch("http://localhost:3000/users/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:this.token,newPassword:this.password}),credentials:"include"}),t=await e.json();t.success?(this.successMessage="Mot de passe réinitialisé avec succès. Vous pouvez maintenant vous connecter.",setTimeout((()=>{this.$router.push("/login")}),1500)):this.errorMessage=t.message||"Erreur lors de la réinitialisation du mot de passe."}catch(e){this.errorMessage="Erreur lors de la communication avec le serveur. Veuillez réessayer plus tard."}}}};const Et=(0,X.A)(Mt,[["render",Ct]]);var Pt=Et,At=s.p+"img/map.ab126786.gif";const Xt={class:"container text-center d-flex flex-column justify-content-center align-items-center",style:{height:"100vh"}},Vt=(0,o.Lk)("h1",{class:"text-center text-white mb-4"},"Trouver un restaurant",-1),_t=(0,o.Lk)("img",{src:At,alt:"Gluten Hack Logo",height:"100",class:"mb-3"},null,-1),jt=(0,o.Lk)("div",{class:"map-container rounded"},[(0,o.Lk)("div",{id:"map",class:"map-content"})],-1),Tt=[Vt,_t,jt];function zt(e,t,s,r,a,n){return(0,o.uX)(),(0,o.CE)("div",Xt,Tt)}var St=s(9597),qt=s.n(St),Qt={name:"MapView",data(){return{map:null,defaultCoords:[4.3517,50.8503],isGeolocationSupported:!0}},mounted(){this.initializeMap()},methods:{initializeMap(){qt().accessToken="pk.eyJ1IjoibmVrb3ZpYTciLCJhIjoiY2x6cXg0eTc4MWhldDJqcXVncGY2cXlmayJ9.EF3zwBmSnQcSQGs9K6CF-w",this.map=new(qt().Map)({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:this.defaultCoords,zoom:13}),this.map.on("load",(()=>{this.initializeGeolocation()}))},initializeGeolocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{const{latitude:t,longitude:s}=e.coords;this.map?(this.map.flyTo({center:[s,t],zoom:13}),this.addCurrentLocationMarker(s,t),this.loadYelpRestaurants(s,t)):console.error("Map is not initialized at geolocation success.")}),(e=>{this.handleGeolocationError(e)})):(console.error("Géolocalisation non supportée."),this.isGeolocationSupported=!1,this.loadYelpRestaurants(this.defaultCoords[0],this.defaultCoords[1]))},handleGeolocationError(e){e&&(console.error("Geolocation error:",e.message),alert("Erreur de géolocalisation. Nous utiliserons les coordonnées par défaut pour afficher les restaurants.")),this.loadYelpRestaurants(this.defaultCoords[0],this.defaultCoords[1])},addCurrentLocationMarker(e,t){this.map?new(qt().Marker)({color:"blue"}).setLngLat([e,t]).setPopup((new(qt().Popup)).setHTML("<h4>Vous êtes ici</h4>")).addTo(this.map):console.error("La carte n'est pas encore initialisée.")},async loadYelpRestaurants(e,t){try{const s=await fetch(`http://localhost:3000/api/yelp-restaurants?latitude=${t}&longitude=${e}&term=gluten-free`,{credentials:"include"}),r=await s.json();if(!r.businesses||0===r.businesses.length)throw new Error("No businesses found in response.");const o=r.businesses.map((e=>({name:e.name,address:e.location.address1,latitude:e.coordinates.latitude,longitude:e.coordinates.longitude})));this.addMarkers(o)}catch(s){console.error("Erreur lors de la récupération des restaurants sans gluten:",s)}},addMarkers(e){this.map?e.forEach((e=>{const t=`https://www.google.com/search?q=${encodeURIComponent(e.name)}`;new(qt().Marker)({color:"red"}).setLngLat([e.longitude,e.latitude]).setPopup(new(qt().Popup)({offset:25}).setHTML(`<b><a href='${t}' target='_blank'>${e.name}</a></b><br>${e.address}`)).addTo(this.map)})):console.error("Map is not initialized in addMarkers.")}}};const Ft=(0,X.A)(Qt,[["render",zt]]);var Ot=Ft,Rt=s.p+"img/scan.1e64330f.gif";const Gt={class:"container text-center mt-5"},Nt=(0,o.Lk)("img",{src:Rt,alt:"Gluten Hack Logo",height:"100",class:"mb-3"},null,-1),Ut=(0,o.Lk)("h2",{class:"text-white"},"Veuillez entrer un code-barres",-1),Bt={class:"row justify-content-center"},Jt={class:"col-md-6"},Ht={class:"input-group mb-3"},Wt={key:0,class:"invalid-feedback"},Dt=["disabled"],It={key:0,class:"alert alert-danger mt-3"};function Yt(e,t,s,n,i,l){return(0,o.uX)(),(0,o.CE)("div",Gt,[Nt,Ut,(0,o.Lk)("div",Bt,[(0,o.Lk)("div",Jt,[(0,o.Lk)("div",Ht,[(0,o.bo)((0,o.Lk)("input",{type:"text",class:(0,a.C4)(["form-control",{"is-invalid":n.v$.barcode.$error}]),placeholder:"Code-barres","onUpdate:modelValue":t[0]||(t[0]=e=>i.barcode=e),onKeypress:t[1]||(t[1]=(...e)=>l.validateInput&&l.validateInput(...e)),onBlur:t[2]||(t[2]=e=>n.v$.barcode.$touch())},null,34),[[r.Jo,i.barcode]])]),n.v$.barcode.$error?((0,o.uX)(),(0,o.CE)("div",Wt,"Le code-barres est requis et doit être composé uniquement de chiffres.")):(0,o.Q3)("",!0),(0,o.Lk)("button",{class:"btn btn-login rounded text-white",onClick:t[3]||(t[3]=(...e)=>l.submitBarcode&&l.submitBarcode(...e)),disabled:n.v$.barcode.$invalid},"Envoyer",8,Dt)]),i.errorMessage?((0,o.uX)(),(0,o.CE)("div",It,(0,a.v_)(i.errorMessage),1)):(0,o.Q3)("",!0),i.glutenMessage?((0,o.uX)(),(0,o.CE)("div",{key:1,class:(0,a.C4)(["alert",i.glutenAlertClass]),"mt-3":""},(0,a.v_)(i.glutenMessage),3)):(0,o.Q3)("",!0)])])}var Kt={name:"ScanView",data(){return{barcode:"",errorMessage:"",glutenMessage:"",glutenAlertClass:""}},validations(){return{barcode:{required:ge.mw,numeric:ge.sH}}},setup(){const e=(0,ve.Ay)();return{v$:e}},methods:{validateInput(e){const t=e.keyCode?e.keyCode:e.which;(t<48||t>57)&&e.preventDefault()},async submitBarcode(){if(this.v$.$touch(),this.v$.barcode.$invalid)this.errorMessage="Veuillez entrer un code-barres valide.";else{this.errorMessage="",this.glutenMessage="",this.glutenAlertClass="";try{const e=await fetch(`http://localhost:3000/products/check/${this.barcode}`,{headers:{"Content-Type":"application/json"},credentials:"include"}),t=await e.json();if(t.exists)t.gluten?(this.glutenMessage="Attention : Ce produit contient du gluten.",this.glutenAlertClass="alert-danger"):(this.glutenMessage="Ce produit ne semble pas contenir de gluten.",this.glutenAlertClass="alert-success");else{const e=await fetch(`https://world.openfoodfacts.org/api/v0/product/${this.barcode}.json`),t=await e.json();if(1===t.status)if(t.product.ingredients_text){const e=t.product.ingredients_text.toLowerCase(),s=["gluten","wheat","barley","rye","oats","triticale","malt"],r=s.some((t=>e.includes(t)));r?(this.glutenMessage="Attention : Ce produit contient du gluten.",this.glutenAlertClass="alert-danger"):(this.glutenMessage="Ce produit ne semble pas contenir de gluten.",this.glutenAlertClass="alert-success"),this.saveProductToDatabase(t.product.product_name,this.barcode,r)}else this.glutenMessage="Les informations sur les ingrédients ne sont pas disponibles.",this.glutenAlertClass="alert-warning";else this.errorMessage="Produit non trouvé."}}catch(e){console.error("Erreur lors de la récupération des données :",e),this.errorMessage="Erreur lors de la récupération des données."}}},async saveProductToDatabase(e,t,s){try{const r=await fetch("http://localhost:3000/products/add",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:e,code_barre:t,gluten:s})});r.ok&&console.log("Product successfully added to the database")}catch(r){console.error("Erreur lors de l'ajout du produit à la base de données :",r)}}}};const Zt=(0,X.A)(Kt,[["render",Yt]]);var es=Zt;const ts={class:"text-center"},ss=(0,o.Lk)("h1",{class:"display-1"},"404",-1),rs=(0,o.Lk)("p",{class:"lead"},"Oops! The page you're looking for doesn't exist.",-1);function os(e,t,s,r,a,n){const i=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",ts,[ss,rs,(0,o.bF)(i,{to:"/",class:"btn btn-login rounded text-white"},{default:(0,o.k6)((()=>[(0,o.eW)("Go Back Home")])),_:1})])}var as={name:"NotFound"};const ns=(0,X.A)(as,[["render",os]]);var is=ns;const ls={class:"container mt-5"},cs=(0,o.Fv)('<h1 class="text-center text-white mb-4">Politique de Confidentialité</h1><div class="text-white"><p> Chez Gluten Hack, nous prenons votre vie privée très au sérieux. Cette politique de confidentialité explique quelles informations nous collectons, comment nous les utilisons et comment nous les protégeons. </p><h3>1. Informations que nous collectons</h3><p> Nous collectons les informations que vous nous fournissez directement, comme lorsque vous créez un compte, remplissez un formulaire ou nous contactez. </p><h3>2. Comment nous utilisons vos informations</h3><p> Nous utilisons vos informations pour vous fournir nos services, améliorer notre site, et vous envoyer des communications pertinentes. </p><h3>3. Partage de vos informations</h3><p> Nous ne partageons pas vos informations personnelles avec des tiers sans votre consentement, sauf si requis par la loi. </p><h3>4. Vos droits</h3><p> Vous avez le droit d&#39;accéder, de corriger ou de supprimer vos informations personnelles à tout moment. </p><h3>5. Sécurité</h3><p> Nous prenons des mesures raisonnables pour protéger vos informations personnelles contre tout accès non autorisé ou divulgation. </p><h3>6. Modifications de cette politique</h3><p> Nous nous réservons le droit de mettre à jour cette politique de confidentialité à tout moment. Nous vous informerons de tout changement important. </p></div>',2),ds=[cs];function us(e,t,s,r,a,n){return(0,o.uX)(),(0,o.CE)("div",ls,ds)}var ms={name:"PrivacyPolicy"};const ps=(0,X.A)(ms,[["render",us]]);var hs=ps;const vs=(0,C.y$)({state:{isAuthenticated:!1},mutations:{setAuthenticated(e,t){e.isAuthenticated=t}},actions:{login({commit:e}){e("setAuthenticated",!0)},logout({commit:e}){e("setAuthenticated",!1)},async checkAuthentication({commit:e}){try{const t=await fetch("http://localhost:3000/users/check-auth",{method:"GET",credentials:"include"});t.ok?e("setAuthenticated",!0):e("setAuthenticated",!1)}catch(t){e("setAuthenticated",!1),console.error("Failed to check authentication:",t)}}},getters:{isAuthenticated:e=>e.isAuthenticated}});var gs=vs;const fs=[{path:"/",name:"HomePage",component:J},{path:"/privacy-policy",name:"PrivacyPolicy",component:hs},{path:"/register",name:"UserRegister",component:ke},{path:"/login",name:"UserLogin",component:Qe},{path:"/profile",name:"UserProfile",component:Ye,meta:{requiresAuth:!0}},{path:"/reset-password",name:"ResetPassword",component:ut},{path:"/reset-password-form",component:Pt},{path:"/map",name:"Map",component:Ot,meta:{requiresAuth:!0}},{path:"/scan",name:"ScanView",component:es,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"NotFound",component:is}],bs=(0,S.aE)({history:(0,S.LA)("/"),routes:fs});bs.beforeEach((async(e,t,s)=>{if(e.matched.some((e=>e.meta.requiresAuth))){await gs.dispatch("checkAuthentication");const e=gs.getters.isAuthenticated;e?s():s("/login")}else s()}));var ks=bs,ws=s(3782);const ys={en:{welcome:"Welcome to Gluten Hack",restaurantMenu:"Restaurant Menu",createAccount:"Create Account",login:"Login",policy:"Policy",welcomeForm:"Welcome back !",password:"Password"},fr:{welcome:"Bienvenue sur Gluten Hack",restaurantMenu:"Carte restaurant",createAccount:"Créer un compte",login:"Connexion",policy:"Politique",welcomeForm:"Te revoilà !",password:"Mot de passe"}},Ls=(0,ws.hU)({locale:"fr",messages:ys});var $s=Ls;s(6099),s(3178);(0,r.Ef)(z).use(ks).use(gs).use($s).mount("#app")}},t={};function s(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,s),a.exports}s.m=e,function(){var e=[];s.O=function(t,r,o,a){if(!r){var n=1/0;for(d=0;d<e.length;d++){r=e[d][0],o=e[d][1],a=e[d][2];for(var i=!0,l=0;l<r.length;l++)(!1&a||n>=a)&&Object.keys(s.O).every((function(e){return s.O[e](r[l])}))?r.splice(l--,1):(i=!1,a<n&&(n=a));if(i){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[r,o,a]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.p="/"}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,a,n=r[0],i=r[1],l=r[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(o in i)s.o(i,o)&&(s.m[o]=i[o]);if(l)var d=l(s)}for(t&&t(r);c<n.length;c++)a=n[c],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(d)},r=self["webpackChunkgluten_hack_frontend"]=self["webpackChunkgluten_hack_frontend"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=s.O(void 0,[504],(function(){return s(6305)}));r=s.O(r)})();
//# sourceMappingURL=app.d20cd9c7.js.map